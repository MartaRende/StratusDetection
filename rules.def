Bootstrap: docker
From: nvidia/cuda:12.6.2-base-ubuntu22.04

%help
    This container provides a CUDA environment with Python and Jupyter Notebook.

%labels
    AUTHOR_NAME Marta Rende
    VERSION 1.0

%environment
 

%post -c /bin/bash
    export DEBIAN_FRONTEND=noninteractive

    # Basic system updates and packages
    apt-get -y update && apt-get -y install \
        git \
        python3-pip \
        python3-dev \
        python3-opencv \
        libglib2.0-0 \
        curl \
        build-essential

    # Upgrade pip
    python3 -m pip install --upgrade pip

    python3 -m pip install setuptools wheel build

%files
    pyproject.toml .
  

%post -c /bin/bash
    # Install your Python project dependencies from pyproject.toml
    python3 -m pip install .

    # pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
